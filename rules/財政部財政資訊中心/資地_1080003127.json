{"publisher":"財政部財政資訊中心","publishNo":"資地字第1080003127號函","publishDate":"2019-09-23","summary":"地方稅平台監控管理規範","content":"一、目的\n\r\n    財政部財政資訊中心(下稱本中心)為有效管理電腦資源，以確保全國各地方稅稽徵機關(下稱各機關)共用地方稅平台作業穩定，特訂定本管理規範。\n\r\n\n\r\n二、各機關執行自撰SQL應注意事項\n\r\n(一)事前教育\n\r\n    為避免因SQL指令不當使用致影響平台效能，各機關系統執行人應具備SQL指令之專業撰寫能力，資料庫操作員(DBO)配賦資料庫權限予系統執行人前，應請系統執行人詳閱SQL查詢注意事項(附件1)，並於該文件簽名確認後，DBO始配賦權限予系統執行人。\n\r\n(二)申請程序\n\r\n    執行自撰SQL前應有申請程序，申請人需填寫申請單，敘明申請原因、引用資料表名稱，預計執行時間及完成時間(附件2)，經單位主管核准後方可執行。\n\r\n(三)撰寫原則\n\r\n  1.應依資料庫工具(如Oracle SQL Developer, PL/SQL Developer, Toad等)取得執行計畫(execution plan)，且執行成本應小於10萬。\n\r\n  2.應有where條件及使用index查詢，並於測試機先行測試通過。\n\r\n  3.禁止使用Parallel Hint功能，避免造成資料庫CPU資源滿載。\n\r\n(四)重要檔案處理原則\n\r\n    各稅稅籍主檔、異動檔等重要檔案(如附件3)禁止執行Full table scan、Insert/Delete、Analysis Table、Rebuild Index等作業。\n\r\n(五)抽核作業\n\r\n    各機關應每月抽核各系統執行人依SQL查詢注意事項(附件1)辦理，且符合效能。\n\r\n\n\r\n三、資料庫匯出作業管理\n\r\n    各機關執行正式區資料庫匯出作業，應依「各縣市稅捐稽徵機關賦稅資料庫資料複製管理作業手冊」規定，申請系統功能使用權限，並填寫申請表經單位主管核准後方可執行。\n\r\n\n\r\n四、「執行成本大於10萬之自撰SQL」或「正式區資料庫匯出」作業規定\n\r\n(一)執行時段\n\r\n  1.工作日中午12:00以後開始執行，13:30以前執行完成。\n\r\n  2.工作日17:30以後開始執行，且於次日上午8:30前執行完成。\n\r\n  3.非工作日不受上述限制。\n\r\n(二)緊急作業需求\n\r\n    各機關倘有臨時緊急作業需求，無法依前述執行時段辦理時，應先填寫緊急作業需求申請單(附件4)送本中心地方稅及徵課組審核同意後，由本中心資通營運組依當時平台負載狀況安排執行時程及通知申請機關，並即時監控平台效能。\n\r\n(三)逾時處理\n\r\n    本中心資通營運組倘發現各機關未於規定時間內執行完成「執行成本大於10萬之自撰SQL」或「正式區資料庫匯出」，且屬於前20大耗用資源之作業，應逕予刪除該作業程序。\n\r\n\n\r\n五、本中心資通營運組已設置專人監控整體稅務系統效能，禁止各機關自行建置資料庫監控程 式，以免影響稅務平台效能。各機關倘有監控地方稅平台需求，得填寫ITIL系統監控看板權限申請單(附件5)，向本中心資通營運組提出申請，審核結果以電子郵件通知申請機關。\n\r\n\n\r\n六、各機關自行開發應用軟體規範\n\r\n(一)考量不影響地方稅平台既有服務效能，各機關自行開發應用軟體應合乎三層式整體開發標準(使用web service)，並依據「地方稅捐稽徵機關自行開發應用軟體規範」(附件6)辦理。\n\r\n(二)各機關如有自行開發應用軟體需求時，須向本中心地方稅及徵課組提出申請，由本中心系統負責人進行需求評估，會辦相關組室，確認不影響平台服務效能後方可上線。\n\r\n\n\r\n七、各機關DBO執行事項管理\n\r\n    各機關DBO負責集中化資料庫內所屬機關資料表之日常管理作業，本中心資通營運組每季已對整體資料庫進行效能調校評估及出具報告，並設置專人監控整體稅務系統效能，有任何異常皆會通知各機關DBO與管理人員，禁止各機關DBO進行以下作業:\n\r\n(一)資料表:重整、搬移、壓縮。\n\r\n(二)索  引:重建、新建、刪除。 \n\r\n(三)自建監控程式。\n\r\n\n\r\n八、改善措施\n\r\n(一)本中心資通營運組每月產製下列報表\n\r\n  1.平台監控作業逾時處理明細表(附件7)及統計表(附件8)：列出未經同意之緊急作業需求，及未於規定時間執行完成之執行成本大於10萬且屬前20大耗用資源之自撰SQL與正式區資料庫匯出處理程序。\n\r\n  2.平台運作異常明細表(附件9)：列出因機關執行成本大於10萬之自撰SQL或資料庫匯出作業，致平台運作異常，造成服務中斷或壅塞之處理程序。\n\r\n(二)本中心資通營運組依據前述報表，對於違反規定機關予以計點，作為自動化稽徵業務考核中「資料庫及檔案管理」項目加減分依據。\n\r\n(三)對於違反規定機關，致影響平台正常運作，情節重大者，除依前項規定計點外，本中心地方稅及徵課組將函請機關提出說明及改善措施。"}
